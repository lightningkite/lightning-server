"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ModificationBuilder = exports.xModificationAnd = exports.modification = void 0;
// Package: com.lightningkite.lightningdb
// Generated by Khrysalis - this file will be overwritten.
const Condition_1 = require("./Condition");
const ConditionBuilder_1 = require("./ConditionBuilder");
const Modification_1 = require("./Modification");
const khrysalis_runtime_1 = require("@lightningkite/khrysalis-runtime");
const iter_tools_es_1 = require("iter-tools-es");
//! Declares com.lightningkite.lightningdb.modification
function modification(setup) {
    return (0, khrysalis_runtime_1.also)(new ModificationBuilder(), (this_) => {
        setup(this_, (0, ConditionBuilder_1.path)());
    }).build();
}
exports.modification = modification;
//! Declares com.lightningkite.lightningdb.and>com.lightningkite.lightningdb.Modificationcom.lightningkite.lightningdb.and.T
function xModificationAnd(this_, setup) {
    return (0, khrysalis_runtime_1.also)(new ModificationBuilder(), (this_1) => {
        this_1.modifications.push(this_);
        setup(this_1, (0, ConditionBuilder_1.path)());
    }).build();
}
exports.xModificationAnd = xModificationAnd;
//! Declares com.lightningkite.lightningdb.ModificationBuilder
class ModificationBuilder {
    constructor() {
        this.modifications = [];
    }
    add(modification) { this.modifications.push(modification); }
    build() {
        var _a;
        return (_a = (() => {
            const temp6 = this.modifications;
            return (temp6.length == 1 ? temp6[0] : null);
        })()) !== null && _a !== void 0 ? _a : new Modification_1.Modification.Chain(this.modifications);
    }
    assignCm(this_, value) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.Assign(value)));
    }
    coerceAtMostCm(this_, value) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.CoerceAtMost(value)));
    }
    coerceAtLeastCm(this_, value) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.CoerceAtLeast(value)));
    }
    plusAssignNumberCm(this_, by) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.Increment(by)));
    }
    timesAssignCm(this_, by) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.Multiply(by)));
    }
    plusAssignStringCm(this_, value) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.AppendString(value)));
    }
    plusAssignListCm(this_, items) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListAppend(items)));
    }
    plusAssignSetCm(this_, items) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetAppend(items)));
    }
    plusAssignItemListCm(this_, item) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListAppend([item])));
    }
    plusAssignItemSetCm(this_, item) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetAppend(new khrysalis_runtime_1.EqualOverrideSet([item]))));
    }
    plusAssignListAddAllCm(this_, items) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListAppend(items)));
    }
    plusAssignSetAddAllCm(this_, items) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetAppend(items)));
    }
    removeAllListCm(this_, condition) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListRemove((condition)((0, ConditionBuilder_1.path)()))));
    }
    removeAllSetCm(this_, condition) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetRemove((condition)((0, ConditionBuilder_1.path)()))));
    }
    removeAllItemsListCm(this_, items) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListRemoveInstances(items)));
    }
    removeAllItemsSetCm(this_, items) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetRemoveInstances(items)));
    }
    dropLastListCm(this_) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListDropLast()));
    }
    dropLastSetCm(this_) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetDropLast()));
    }
    dropFirstListCm(this_) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListDropFirst()));
    }
    dropFirstSetCm(this_) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetDropFirst()));
    }
    mapListCm(this_, modification) {
        const builder = new ModificationBuilder();
        modification(builder, (0, ConditionBuilder_1.path)());
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListPerElement(new Condition_1.Condition.Always(), builder.build())));
    }
    mapSetCm(this_, modification) {
        const builder = new ModificationBuilder();
        modification(builder, (0, ConditionBuilder_1.path)());
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetPerElement(new Condition_1.Condition.Always(), builder.build())));
    }
    mapIfListCm(this_, condition, modification) {
        const builder = new ModificationBuilder();
        modification(builder, (0, ConditionBuilder_1.path)());
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListPerElement((condition)((0, ConditionBuilder_1.path)()), builder.build())));
    }
    mapIfSetCm(this_, condition, modification) {
        const builder = new ModificationBuilder();
        modification(builder, (0, ConditionBuilder_1.path)());
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetPerElement((condition)((0, ConditionBuilder_1.path)()), builder.build())));
    }
    plusAssignMapCm(this_, map) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.Combine(map)));
    }
    modifyByKeyCm(this_, byKey) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ModifyByKey(new Map((0, iter_tools_es_1.map)(x => [x[0], ((it) => (modification(it[1])))(x)], byKey.entries())))));
    }
    removeKeysCm(this_, fields) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.RemoveKeys(fields)));
    }
    // ---
    assign(this_, value) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.Assign(value)));
    }
    coerceAtMost(this_, value) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.CoerceAtMost(value)));
    }
    coerceAtLeast(this_, value) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.CoerceAtLeast(value)));
    }
    plusAssignNumber(this_, by) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.Increment(by)));
    }
    timesAssign(this_, by) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.Multiply(by)));
    }
    plusAssignString(this_, value) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.AppendString(value)));
    }
    plusAssignList(this_, items) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListAppend(items)));
    }
    plusAssignSet(this_, items) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetAppend(items)));
    }
    plusAssignItemList(this_, item) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListAppend([item])));
    }
    plusAssignItemSet(this_, item) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetAppend(new khrysalis_runtime_1.EqualOverrideSet([item]))));
    }
    plusAssignListAddAll(this_, items) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListAppend(items)));
    }
    plusAssignSetAddAll(this_, items) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetAppend(items)));
    }
    removeAllList(this_, condition) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListRemove((condition)((0, ConditionBuilder_1.path)()))));
    }
    removeAllSet(this_, condition) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetRemove((condition)((0, ConditionBuilder_1.path)()))));
    }
    removeAllItemsList(this_, items) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListRemoveInstances(items)));
    }
    removeAllItemsSet(this_, items) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetRemoveInstances(items)));
    }
    dropLastList(this_) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListDropLast()));
    }
    dropLastSet(this_) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetDropLast()));
    }
    dropFirstList(this_) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListDropFirst()));
    }
    dropFirstSet(this_) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetDropFirst()));
    }
    mapList(this_, modification) {
        const builder = new ModificationBuilder();
        modification(builder, (0, ConditionBuilder_1.path)());
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListPerElement(new Condition_1.Condition.Always(), builder.build())));
    }
    mapSet(this_, modification) {
        const builder = new ModificationBuilder();
        modification(builder, (0, ConditionBuilder_1.path)());
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetPerElement(new Condition_1.Condition.Always(), builder.build())));
    }
    mapIfList(this_, condition, modification) {
        const builder = new ModificationBuilder();
        modification(builder, (0, ConditionBuilder_1.path)());
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ListPerElement((condition)((0, ConditionBuilder_1.path)()), builder.build())));
    }
    mapIfSet(this_, condition, modification) {
        const builder = new ModificationBuilder();
        modification(builder, (0, ConditionBuilder_1.path)());
        this.modifications.push(this_.mapModification(new Modification_1.Modification.SetPerElement((condition)((0, ConditionBuilder_1.path)()), builder.build())));
    }
    plusAssignMap(this_, map) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.Combine(map)));
    }
    modifyByKey(this_, byKey) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.ModifyByKey(new Map((0, iter_tools_es_1.map)(x => [x[0], ((it) => (modification(it[1])))(x)], byKey.entries())))));
    }
    removeKeys(this_, fields) {
        this.modifications.push(this_.mapModification(new Modification_1.Modification.RemoveKeys(fields)));
    }
}
exports.ModificationBuilder = ModificationBuilder;
//# sourceMappingURL=ModificationBuilder.js.map