"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Condition = void 0;
// Package: com.lightningkite.lightningdb
// Generated by Khrysalis - this file will be overwritten.
const khrysalis_runtime_1 = require("@lightningkite/khrysalis-runtime");
const iter_tools_es_1 = require("iter-tools-es");
//! Declares com.lightningkite.lightningdb.Condition
class Condition {
    constructor() {
    }
    hashCode() { throw undefined; }
    equals(other) { throw undefined; }
    invoke(on) { throw undefined; }
    simplify() {
        return this;
    }
    and(other) {
        return new Condition.And([this, other]);
    }
    or(other) {
        return new Condition.Or([this, other]);
    }
    not() {
        return new Condition.Not(this);
    }
}
exports.Condition = Condition;
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.Never
    class Never extends Condition {
        constructor() {
            super();
        }
        invoke(on) {
            return false;
        }
        hashCode() {
            return 0;
        }
        equals(other) {
            return ((0, khrysalis_runtime_1.tryCastClass)(other, Condition.Never)) !== null;
        }
    }
    Condition.Never = Never;
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.Always
    class Always extends Condition {
        constructor() {
            super();
        }
        invoke(on) {
            return true;
        }
        hashCode() {
            return 1;
        }
        equals(other) {
            return ((0, khrysalis_runtime_1.tryCastClass)(other, Condition.Always)) !== null;
        }
    }
    Condition.Always = Always;
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.And
    class And extends Condition {
        constructor(conditions) {
            super();
            this.conditions = conditions;
        }
        static propertyTypes(T) { return { conditions: [Array, [Condition, T]] }; }
        invoke(on) {
            return this.conditions.every((it) => (it.invoke(on)));
        }
        simplify() {
            return this.conditions.length === 0 ? new Condition.Always() : new Condition.And([...new khrysalis_runtime_1.EqualOverrideSet(this.conditions)]);
        }
    }
    And.properties = ["conditions"];
    Condition.And = And;
    (0, khrysalis_runtime_1.setUpDataClass)(And);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.Or
    class Or extends Condition {
        constructor(conditions) {
            super();
            this.conditions = conditions;
        }
        static propertyTypes(T) { return { conditions: [Array, [Condition, T]] }; }
        invoke(on) {
            return this.conditions.some((it) => (it.invoke(on)));
        }
        simplify() {
            return this.conditions.length === 0 ? new Condition.Never() : new Condition.Or([...new khrysalis_runtime_1.EqualOverrideSet(this.conditions)]);
        }
    }
    Or.properties = ["conditions"];
    Condition.Or = Or;
    (0, khrysalis_runtime_1.setUpDataClass)(Or);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.Not
    class Not extends Condition {
        constructor(condition) {
            super();
            this.condition = condition;
        }
        static propertyTypes(T) { return { condition: [Condition, T] }; }
        invoke(on) {
            return (!this.condition.invoke(on));
        }
        simplify() {
            var _a, _b, _c;
            return (_c = ((_b = (_a = ((0, khrysalis_runtime_1.tryCastClass)(this.condition, Condition.Not))) === null || _a === void 0 ? void 0 : _a.condition) !== null && _b !== void 0 ? _b : null)) !== null && _c !== void 0 ? _c : this;
        }
    }
    Not.properties = ["condition"];
    Condition.Not = Not;
    (0, khrysalis_runtime_1.setUpDataClass)(Not);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.Equal
    class Equal extends Condition {
        constructor(value) {
            super();
            this.value = value;
        }
        static propertyTypes(T) { return { value: T }; }
        invoke(on) {
            return (0, khrysalis_runtime_1.safeEq)(on, this.value);
        }
    }
    Equal.properties = ["value"];
    Condition.Equal = Equal;
    (0, khrysalis_runtime_1.setUpDataClass)(Equal);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.NotEqual
    class NotEqual extends Condition {
        constructor(value) {
            super();
            this.value = value;
        }
        static propertyTypes(T) { return { value: T }; }
        invoke(on) {
            return !(0, khrysalis_runtime_1.safeEq)(on, this.value);
        }
    }
    NotEqual.properties = ["value"];
    Condition.NotEqual = NotEqual;
    (0, khrysalis_runtime_1.setUpDataClass)(NotEqual);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.Inside
    class Inside extends Condition {
        constructor(values) {
            super();
            this.values = values;
        }
        static propertyTypes(T) { return { values: [Array, T] }; }
        invoke(on) {
            return this.values.some((x) => (0, khrysalis_runtime_1.safeEq)(on, x));
        }
    }
    Inside.properties = ["values"];
    Condition.Inside = Inside;
    (0, khrysalis_runtime_1.setUpDataClass)(Inside);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.NotInside
    class NotInside extends Condition {
        constructor(values) {
            super();
            this.values = values;
        }
        static propertyTypes(T) { return { values: [Array, T] }; }
        invoke(on) {
            return (!this.values.some((x) => (0, khrysalis_runtime_1.safeEq)(on, x)));
        }
    }
    NotInside.properties = ["values"];
    Condition.NotInside = NotInside;
    (0, khrysalis_runtime_1.setUpDataClass)(NotInside);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.GreaterThan
    class GreaterThan extends Condition {
        constructor(value) {
            super();
            this.value = value;
        }
        static propertyTypes(T) { return { value: T }; }
        invoke(on) {
            return (0, khrysalis_runtime_1.safeCompare)(on, this.value) > 0;
        }
    }
    GreaterThan.properties = ["value"];
    Condition.GreaterThan = GreaterThan;
    (0, khrysalis_runtime_1.setUpDataClass)(GreaterThan);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.LessThan
    class LessThan extends Condition {
        constructor(value) {
            super();
            this.value = value;
        }
        static propertyTypes(T) { return { value: T }; }
        invoke(on) {
            return (0, khrysalis_runtime_1.safeCompare)(on, this.value) < 0;
        }
    }
    LessThan.properties = ["value"];
    Condition.LessThan = LessThan;
    (0, khrysalis_runtime_1.setUpDataClass)(LessThan);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.GreaterThanOrEqual
    class GreaterThanOrEqual extends Condition {
        constructor(value) {
            super();
            this.value = value;
        }
        static propertyTypes(T) { return { value: T }; }
        invoke(on) {
            return (0, khrysalis_runtime_1.safeCompare)(on, this.value) >= 0;
        }
    }
    GreaterThanOrEqual.properties = ["value"];
    Condition.GreaterThanOrEqual = GreaterThanOrEqual;
    (0, khrysalis_runtime_1.setUpDataClass)(GreaterThanOrEqual);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.LessThanOrEqual
    class LessThanOrEqual extends Condition {
        constructor(value) {
            super();
            this.value = value;
        }
        static propertyTypes(T) { return { value: T }; }
        invoke(on) {
            return (0, khrysalis_runtime_1.safeCompare)(on, this.value) <= 0;
        }
    }
    LessThanOrEqual.properties = ["value"];
    Condition.LessThanOrEqual = LessThanOrEqual;
    (0, khrysalis_runtime_1.setUpDataClass)(LessThanOrEqual);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.StringContains
    class StringContains extends Condition {
        constructor(value, ignoreCase = false) {
            super();
            this.value = value;
            this.ignoreCase = ignoreCase;
        }
        static propertyTypes() { return { value: [String], ignoreCase: [Boolean] }; }
        invoke(on) {
            return (on.toLowerCase().indexOf(this.value.toLowerCase()) != -1);
        }
    }
    StringContains.properties = ["value", "ignoreCase"];
    Condition.StringContains = StringContains;
    (0, khrysalis_runtime_1.setUpDataClass)(StringContains);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.FullTextSearch
    class FullTextSearch extends Condition {
        constructor(value, ignoreCase = false) {
            super();
            this.value = value;
            this.ignoreCase = ignoreCase;
        }
        static propertyTypes(T) { return { value: [String], ignoreCase: [Boolean] }; }
        invoke(on) {
            throw "Not Implemented locally";
        }
    }
    FullTextSearch.properties = ["value", "ignoreCase"];
    Condition.FullTextSearch = FullTextSearch;
    (0, khrysalis_runtime_1.setUpDataClass)(FullTextSearch);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.RegexMatches
    class RegexMatches extends Condition {
        constructor(pattern, ignoreCase = false) {
            super();
            this.pattern = pattern;
            this.ignoreCase = ignoreCase;
            this.regex = new RegExp(this.pattern);
        }
        static propertyTypes() { return { pattern: [String], ignoreCase: [Boolean] }; }
        invoke(on) {
            return this.regex.test(on);
        }
    }
    RegexMatches.properties = ["pattern", "ignoreCase"];
    Condition.RegexMatches = RegexMatches;
    (0, khrysalis_runtime_1.setUpDataClass)(RegexMatches);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.IntBitsClear
    class IntBitsClear extends Condition {
        constructor(mask) {
            super();
            this.mask = mask;
        }
        static propertyTypes() { return { mask: [Number] }; }
        invoke(on) {
            return (on & this.mask) === 0;
        }
    }
    IntBitsClear.properties = ["mask"];
    Condition.IntBitsClear = IntBitsClear;
    (0, khrysalis_runtime_1.setUpDataClass)(IntBitsClear);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.IntBitsSet
    class IntBitsSet extends Condition {
        constructor(mask) {
            super();
            this.mask = mask;
        }
        static propertyTypes() { return { mask: [Number] }; }
        invoke(on) {
            return (on & this.mask) === this.mask;
        }
    }
    IntBitsSet.properties = ["mask"];
    Condition.IntBitsSet = IntBitsSet;
    (0, khrysalis_runtime_1.setUpDataClass)(IntBitsSet);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.IntBitsAnyClear
    class IntBitsAnyClear extends Condition {
        constructor(mask) {
            super();
            this.mask = mask;
        }
        static propertyTypes() { return { mask: [Number] }; }
        invoke(on) {
            return (on & this.mask) < this.mask;
        }
    }
    IntBitsAnyClear.properties = ["mask"];
    Condition.IntBitsAnyClear = IntBitsAnyClear;
    (0, khrysalis_runtime_1.setUpDataClass)(IntBitsAnyClear);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.IntBitsAnySet
    class IntBitsAnySet extends Condition {
        constructor(mask) {
            super();
            this.mask = mask;
        }
        static propertyTypes() { return { mask: [Number] }; }
        invoke(on) {
            return (on & this.mask) > 0;
        }
    }
    IntBitsAnySet.properties = ["mask"];
    Condition.IntBitsAnySet = IntBitsAnySet;
    (0, khrysalis_runtime_1.setUpDataClass)(IntBitsAnySet);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.ListAllElements
    class ListAllElements extends Condition {
        constructor(condition) {
            super();
            this.condition = condition;
        }
        static propertyTypes(E) { return { condition: [Condition, E] }; }
        invoke(on) {
            return on.every((it) => (this.condition.invoke(it)));
        }
    }
    ListAllElements.properties = ["condition"];
    Condition.ListAllElements = ListAllElements;
    (0, khrysalis_runtime_1.setUpDataClass)(ListAllElements);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.ListAnyElements
    class ListAnyElements extends Condition {
        constructor(condition) {
            super();
            this.condition = condition;
        }
        static propertyTypes(E) { return { condition: [Condition, E] }; }
        invoke(on) {
            return on.some((it) => (this.condition.invoke(it)));
        }
    }
    ListAnyElements.properties = ["condition"];
    Condition.ListAnyElements = ListAnyElements;
    (0, khrysalis_runtime_1.setUpDataClass)(ListAnyElements);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.ListSizesEquals
    class ListSizesEquals extends Condition {
        constructor(count) {
            super();
            this.count = count;
        }
        static propertyTypes(E) { return { count: [Number] }; }
        invoke(on) {
            return on.length === this.count;
        }
    }
    ListSizesEquals.properties = ["count"];
    Condition.ListSizesEquals = ListSizesEquals;
    (0, khrysalis_runtime_1.setUpDataClass)(ListSizesEquals);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.SetAllElements
    class SetAllElements extends Condition {
        constructor(condition) {
            super();
            this.condition = condition;
        }
        static propertyTypes(E) { return { condition: [Condition, E] }; }
        invoke(on) {
            return (0, iter_tools_es_1.every)((it) => (this.condition.invoke(it)), on);
        }
    }
    SetAllElements.properties = ["condition"];
    Condition.SetAllElements = SetAllElements;
    (0, khrysalis_runtime_1.setUpDataClass)(SetAllElements);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.SetAnyElements
    class SetAnyElements extends Condition {
        constructor(condition) {
            super();
            this.condition = condition;
        }
        static propertyTypes(E) { return { condition: [Condition, E] }; }
        invoke(on) {
            return (0, iter_tools_es_1.some)((it) => (this.condition.invoke(it)), on);
        }
    }
    SetAnyElements.properties = ["condition"];
    Condition.SetAnyElements = SetAnyElements;
    (0, khrysalis_runtime_1.setUpDataClass)(SetAnyElements);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.SetSizesEquals
    class SetSizesEquals extends Condition {
        constructor(count) {
            super();
            this.count = count;
        }
        static propertyTypes(E) { return { count: [Number] }; }
        invoke(on) {
            return on.size === this.count;
        }
    }
    SetSizesEquals.properties = ["count"];
    Condition.SetSizesEquals = SetSizesEquals;
    (0, khrysalis_runtime_1.setUpDataClass)(SetSizesEquals);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.Exists
    class Exists extends Condition {
        constructor(key) {
            super();
            this.key = key;
        }
        static propertyTypes(V) { return { key: [String] }; }
        invoke(on) {
            return on.has(this.key);
        }
    }
    Exists.properties = ["key"];
    Condition.Exists = Exists;
    (0, khrysalis_runtime_1.setUpDataClass)(Exists);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.OnKey
    class OnKey extends Condition {
        constructor(key, condition) {
            super();
            this.key = key;
            this.condition = condition;
        }
        static propertyTypes(V) { return { key: [String], condition: [Condition, V] }; }
        invoke(on) {
            var _a;
            return on.has(this.key) && this.condition.invoke(((_a = on.get(this.key)) !== null && _a !== void 0 ? _a : null));
        }
    }
    OnKey.properties = ["key", "condition"];
    Condition.OnKey = OnKey;
    (0, khrysalis_runtime_1.setUpDataClass)(OnKey);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.OnField
    class OnField extends Condition {
        constructor(key, condition) {
            super();
            this.key = key;
            this.condition = condition;
        }
        static propertyTypes(K, V) { return { key: [String, K, V], condition: [Condition, V] }; }
        invoke(on) {
            return this.condition.invoke((0, khrysalis_runtime_1.reflectiveGet)(on, this.key));
        }
    }
    OnField.properties = ["key", "condition"];
    Condition.OnField = OnField;
    (0, khrysalis_runtime_1.setUpDataClass)(OnField);
})(Condition = exports.Condition || (exports.Condition = {}));
(function (Condition) {
    //! Declares com.lightningkite.lightningdb.Condition.IfNotNull
    class IfNotNull extends Condition {
        constructor(condition) {
            super();
            this.condition = condition;
        }
        static propertyTypes(T) { return { condition: [Condition, T] }; }
        invoke(on) {
            return on !== null && this.condition.invoke(on);
        }
    }
    IfNotNull.properties = ["condition"];
    Condition.IfNotNull = IfNotNull;
    (0, khrysalis_runtime_1.setUpDataClass)(IfNotNull);
})(Condition = exports.Condition || (exports.Condition = {}));
//# sourceMappingURL=Condition.js.map